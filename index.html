<!DOCTYPE html>
<html lang="ko">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Z3EY0BBYQW"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-Z3EY0BBYQW');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ì§€ìƒ RP ìŠ¤ì½”ì–´ë³´ë“œ - HABOM Edition</title>

    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>âš”ï¸</text></svg>">
    <meta property="og:title" content="ì§€ìƒ RP ìŠ¤ì½”ì–´ ë³´ë“œ âš”ï¸">
    <meta property="og:description" content="ë‹¹ì‹ ë„ ì´ì œ ë¼ìš´ë“œê±¸ âœ¨ ì°¡ê¸‹- ğŸ˜‰ğŸ’•">
    <meta property="og:type" content="website">

    <style>
        :root {
            --bg-color: #f0f2f5;
            --card-bg: #ffffff;
            --primary: #2b78e4;
            --danger: #e63946;
            --atk-color: #f76707;
            --def-color: #495057;
            --text-main: #2d3436;
            --signature-color: #adb5bd;
            --input-height: 48px;
        }

        html { font-size: 16px; }
        @media (min-width: 2500px) { html { font-size: 20px; } }

        body { 
            font-family: 'Pretendard', -apple-system, sans-serif; 
            background: var(--bg-color); 
            display: flex; justify-content: center; 
            padding: 20px 10px; margin: 0; 
            -webkit-text-size-adjust: none;
        }
        
        .container { 
            width: 100%; max-width: 760px; 
            background: var(--card-bg); padding: 2rem 2.5rem; 
            border-radius: 32px; box-shadow: 0 15px 40px rgba(0,0,0,0.08); 
            position: relative; box-sizing: border-box;
        }

        @media (max-width: 480px) { .container { padding: 1.5rem 0.8rem; } }
        
        .top-right-btns { position: absolute; top: 1rem; right: 1.5rem; display: flex; flex-direction: column; align-items: flex-end; gap: 8px; }
        .signature-top { font-size: 0.65rem; color: var(--signature-color); font-weight: bold; letter-spacing: 1px; }
        .help-icon { 
            width: 26px; height: 26px; background: #f1f3f5; border-radius: 50%; 
            display: flex; justify-content: center; align-items: center; 
            cursor: pointer; font-weight: bold; color: #adb5bd; border: 1px solid #dee2e6; font-size: 0.9rem;
        }

        .page-header { text-align: center; margin-bottom: 1.2rem; padding-bottom: 0.8rem; border-bottom: 2px solid #f1f3f5; }
        .page-header h1 { font-size: clamp(1.4rem, 5vw, 2.4rem); font-weight: 900; color: var(--text-main); margin: 0; white-space: nowrap; }
        .sub-title { font-size: 1rem; color: #ff6b6b; font-weight: 700; margin-top: 4px; }

        .top-settings { 
            display: grid; 
            grid-template-columns: 80px 110px 1fr 1fr; 
            gap: 10px; 
            align-items: flex-end;
            margin-bottom: 1.5rem; 
            position: relative; z-index: 101; 
        }

        @media (max-width: 600px) {
            .top-settings { grid-template-columns: 1fr 1fr; }
            .init-btns-wrapper { grid-column: span 2; display: flex; gap: 8px; }
        }

        .setting-group { display: flex; flex-direction: column; gap: 4px; }
        .label-sm { font-size: 0.75rem; font-weight: bold; color: #868e96; text-transform: uppercase; white-space: nowrap; }
        
        .select-custom { 
            height: var(--input-height); border: 2px solid #dee2e6; border-radius: 12px; 
            font-weight: 900; font-size: 1rem; color: #636e72; background-color: #fff; text-align: center;
            width: 100%; cursor: pointer; outline: none; box-sizing: border-box;
        }

        .btn-init { 
            height: var(--input-height); border: 2px solid #dee2e6; border-radius: 12px; 
            background: white; font-size: 0.95rem; cursor: pointer; font-weight: bold; color: #636e72; 
            white-space: nowrap; display: flex; align-items: center; justify-content: center; width: 100%;
        }
        .btn-init.active-a { background: var(--primary); color: white; border-color: var(--primary); }
        .btn-init.active-b { background: var(--danger); color: white; border-color: var(--danger); }
        .init-btns-wrapper { display: contents; } 

        .board-wrapper { position: relative; border-radius: 20px; }
        
        #lockLayer {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0, 0, 0, 0.85); border-radius: 24px; z-index: 100;
            display: flex; justify-content: center; align-items: center; backdrop-filter: blur(5px);
            color: #ffffff; font-weight: 900; font-size: clamp(1.2rem, 4vw, 1.8rem); text-align: center; line-height: 1.5;
            text-shadow: 0 2px 15px rgba(0,0,0,0.8);
        }

        .reverse-display { 
            background: #fff0f6; padding: 10px 25px; border-radius: 50px; text-align: center; 
            margin: 0 auto 0.8rem auto; border: 2.5px solid #ffdeeb; display: table; 
        }
        .reverse-display b { font-size: 1.2rem; margin-left: 8px; text-decoration: underline; color: #f06595; }

        .scoreboard { 
            display: flex; align-items: center; justify-content: space-between; 
            margin-bottom: 0.6rem; background: #fbfbfb; padding: 1.5rem 2rem; 
            border-radius: 28px; border: 1px solid #f1f3f5; 
        }
        .team-side { text-align: center; flex: 1; }
        .small-val { font-size: clamp(5rem, 16vw, 9rem); font-weight: 900; line-height: 0.85; margin: 6px 0; }
        .team-a .small-val { color: var(--primary); }
        .team-b .small-val { color: var(--danger); }
        .pos-badge { display: inline-block; padding: 4px 14px; border-radius: 12px; font-size: 1rem; font-weight: bold; color: white; margin-top: 4px; }
        .bg-atk { background: var(--atk-color); }
        .bg-def { background: var(--def-color); }

        .action-btns { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 1rem; }
        .btn-win { 
            height: 100px; border: none; border-radius: 28px; 
            font-size: clamp(1.3rem, 4vw, 1.8rem); font-weight: 900; color: white; cursor: pointer; position: relative; 
            box-shadow: 0 8px 20px rgba(0,0,0,0.1); white-space: nowrap; letter-spacing: -0.5px;
            display: flex; align-items: center; justify-content: center;
        }
        .btn-win:active { transform: scale(0.96); }
        .key-hint { position: absolute; top: 8px; left: 15px; font-size: 0.75rem; color: rgba(255,255,255,0.6); font-weight: 900; }
        .btn-win-a { background: linear-gradient(135deg, #4dabf7, #228be6); }
        .btn-win-b { background: linear-gradient(135deg, #ff8787, #fa5252); }

        .copy-area { background: #343a40; color: white; padding: 12px; border-radius: 18px; text-align: center; margin-bottom: 1.5rem; cursor: pointer; }
        .chat-text { font-size: 2.3rem; font-weight: 900; letter-spacing: 5px; line-height: 1; }
        
        .history-title-area { text-align: center; margin-bottom: 10px; }
        .history-title-area .label-sm { font-size: 1.1rem; color: #495057; border-bottom: 2.5px solid #eee; padding-bottom: 4px; }

        .history-container { background: #fff; border: 2px solid #eee; border-radius: 20px; overflow: hidden; margin-bottom: 15px; }
        .hist-table { width: 100%; border-collapse: collapse; text-align: center; font-size: 1rem; table-layout: fixed; }
        .hist-table th { font-size: 0.9rem; padding: 12px 5px; border-bottom: 2px solid #eee; background: #f8f9fa; color: #868e96; }
        .hist-table td { padding: 14px 5px; border-bottom: 1px solid #f8f9fa; font-weight: 800; }
        .hist-winner-a { color: var(--primary); background-color: #f1f9ff !important; }
        .hist-winner-b { color: var(--danger); background-color: #fff8f8 !important; }

        .btn-more { width: 100%; padding: 14px; background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 14px; cursor: pointer; font-size: 1rem; font-weight: bold; color: #495057; }
        .large-history-area { margin-top: 15px; display: none; }

        .settle-section { margin-top: 1.5rem; padding: 1.8rem; background: #e7f5ff; border-radius: 28px; text-align: center; }
        .money-text { font-size: 2.2rem; font-weight: 900; color: var(--primary); margin-bottom: 12px; line-height: 1; }
        .btn-copy-raw { padding: 12px 25px; background: #2b78e4; color: white; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; font-size: 1rem; width: 100%; max-width: 300px; }

        .footer { margin-top: 2.5rem; text-align: center; border-top: 1px solid #f1f3f5; padding-top: 1.5rem; }
        .btn-reset { background: #f8f9fa; border: 1px solid #dee2e6; color: #adb5bd; padding: 10px 25px; border-radius: 10px; cursor: pointer; font-size: 0.85rem; }
        .signature-bottom { font-size: 0.75rem; color: #dee2e6; font-weight: bold; letter-spacing: 2px; margin-top: 15px; }

        #helpModal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); display: none; justify-content: center; align-items: center; z-index: 1000; backdrop-filter: blur(5px); }
        .modal-content { background: white; padding: 2.5rem; border-radius: 32px; width: 85%; max-width: 480px; position: relative; }
        .close-btn { position: absolute; top: 1.2rem; right: 1.2rem; background: none; border: none; font-size: 2rem; cursor: pointer; color: #adb5bd; }
    </style>
</head>
<body>

<div class="container">
    <div class="top-right-btns">
        <div class="signature-top">CREATED BY HABOM</div>
        <div class="help-icon" onclick="openHelp()">?</div>
    </div>

    <div class="page-header">
        <h1>âš”ï¸ ì§€ìƒ RP ìŠ¤ì½”ì–´ ë³´ë“œ âš”ï¸</h1>
        <p class="sub-title">ë‹¹ì‹ ë„ ì´ì œ ë¼ìš´ë“œê±¸ âœ¨ ì°¡ê¸‹- ğŸ˜‰ğŸ’•</p>
    </div>

    <div class="top-settings">
        <div class="setting-group">
            <span class="label-sm">ì¸ì›</span>
            <select id="mems" class="select-custom" onchange="render()">
                <option value="2">2ëª…</option><option value="3">3ëª…</option><option value="4">4ëª…</option>
                <option value="5">5ëª…</option><option value="6">6ëª…</option><option value="7" selected>7ëª…</option>
            </select>
        </div>
        <div class="setting-group">
            <span class="label-sm">ì¸ë‹¹ íŒ¨ë°°ê¸ˆ</span>
            <select id="betAmount" class="select-custom" onchange="render()">
                <option value="1">1ì²œë§Œ</option><option value="2">2ì²œë§Œ</option><option value="3" selected>3ì²œë§Œ</option>
                <option value="4">4ì²œë§Œ</option><option value="5">5ì²œë§Œ</option><option value="6">6ì²œë§Œ</option>
                <option value="7">7ì²œë§Œ</option><option value="8">8ì²œë§Œ</option><option value="9">9ì²œë§Œ</option>
            </select>
        </div>
        <div class="init-btns-wrapper">
            <button id="initA" class="btn-init" onclick="setInitial('A')">ìš°ë¦¬íŒ€ ì„ í¬</button>
            <button id="initB" class="btn-init" onclick="setInitial('B')">ìƒëŒ€íŒ€ ì„ í¬</button>
        </div>
    </div>

    <div class="board-wrapper">
        <div id="lockLayer">ìµœì´ˆ ì„ í¬íŒ€ì„<br>ë¨¼ì € ì„ íƒí•˜ì„¸ìš”! âœ¨</div>

        <div class="reverse-display">
            <span>ğŸ”„ ë‹¤ìŒ ì—­ì„ í¬ ì°¨ë¡€</span><b id="revTeam">-</b>
        </div>

        <div class="scoreboard">
            <div class="team-side team-a">
                <div style="font-size:1rem; font-weight:bold; color:#adb5bd;">í°ìŠ¤</div>
                <div id="lScoreA" style="font-size:2.2rem; font-weight:900; color:#495057;">0</div>
                <div id="sScoreA" class="small-val">0</div>
                <div id="badgeA" class="pos-badge">ëŒ€ê¸°</div>
            </div>
            <div style="font-size: 3.5rem; color: #eee; font-weight: 900;">:</div>
            <div class="team-side team-b">
                <div style="font-size:1rem; font-weight:bold; color:#adb5bd;">í°ìŠ¤</div>
                <div id="lScoreB" style="font-size:2.2rem; font-weight:900; color:#495057;">0</div>
                <div id="sScoreB" class="small-val">0</div>
                <div id="badgeB" class="pos-badge">ëŒ€ê¸°</div>
            </div>
        </div>

        <div class="action-btns">
            <button class="btn-win btn-win-a" onclick="addWin('A')">
                <span class="key-hint">Q/1</span>ìš°ë¦¬íŒ€ ë“ì 
            </button>
            <button class="btn-win btn-win-b" onclick="addWin('B')">
                <span class="key-hint">E/2</span>ìƒëŒ€íŒ€ ë“ì 
            </button>
        </div>

        <div class="copy-area" onclick="copyScore()">
            <span style="font-size:0.85rem; color:#adb5bd; display:block; margin-bottom:4px;">í´ë¦­í•˜ì—¬ ì±„íŒ… ìŠ¤ì½”ì–´ ë³µì‚¬</span>
            <div id="chatDisplay" class="chat-text">00 00</div>
        </div>

        <div class="history-title-area"><span class="label-sm">ğŸ“Š ì‘ìŠ¤ íˆìŠ¤í† ë¦¬</span></div>
        <div class="history-container"><table class="hist-table"><thead><tr><th style="width:25%">ì§„í–‰</th><th>ìš°ë¦¬íŒ€</th><th>ìƒëŒ€íŒ€</th></tr></thead><tbody id="smallHistoryBody"></tbody></table></div>

        <button class="btn-more" id="moreBtn" onclick="toggleLargeHistory()">í°ìŠ¤ ê²°ê³¼ ë”ë³´ê¸° (â–¼)</button>
        <div id="largeHistoryArea" class="large-history-area">
            <div class="history-title-area"><span class="label-sm">ğŸ“œ í°ìŠ¤ ê²°ê³¼ ëª¨ìŒ</span></div>
            <div class="history-container"><table class="hist-table"><thead><tr><th style="width:25%">ìŠ¤ì½”ì–´</th><th>ìš°ë¦¬íŒ€</th><th>ìƒëŒ€íŒ€</th></tr></thead><tbody id="largeHistoryBody"></tbody></table></div>
        </div>
    </div>

    <div class="settle-section">
        <span class="label-sm" style="color: #748ffc;">ğŸ’° í˜„ì¬ ì˜ˆìƒ íŒ¨ë°°ê¸ˆ</span>
        <div id="moneyDisplay" class="money-text">0ì›</div>
        <button class="btn-copy-raw" onclick="copyRawMoney()">ìˆ«ìë§Œ ë³µì‚¬</button>
    </div>

    <div class="footer">
        <button class="btn-reset" onclick="resetAll()">ë°ì´í„° ì „ì²´ ì´ˆê¸°í™”</button>
        <div class="signature-bottom">HABOM DESIGN WORKS</div>
    </div>
</div>

<div id="helpModal">
    <div class="modal-content"><button class="close-btn" onclick="closeHelp()">Ã—</button><h2>ğŸ“– ì‚¬ìš© ë°©ë²•</h2><ul><li><b>ì‹œì‘:</b> ìƒë‹¨ì˜ 'ì„ í¬íŒ€' ë²„íŠ¼ì„ ëˆŒëŸ¬ ì‹œì‘í•˜ì„¸ìš”.</li><li><b>ë“ì :</b> ë²„íŠ¼ í´ë¦­ ë˜ëŠ” ë‹¨ì¶•í‚¤ ì‚¬ìš© (Q, E).</li><li><b>ê³µìœ :</b> ìŠ¤ì½”ì–´ ë°•ìŠ¤ í´ë¦­ ì‹œ í…ìŠ¤íŠ¸ ë³µì‚¬.</li></ul></div>
</div>

<script>
    let state = { isStarted: false, initial: 'A', currentSetAttacker: 'A', largeA: 0, largeB: 0, smallA: 0, smallB: 0, roundLogs: [], largeHistory: [], reverseTurn: 'B' };
    
    window.addEventListener('keydown', e => { 
        if (document.activeElement.tagName === 'SELECT' || !state.isStarted) return; 
        const k = e.key.toLowerCase(); 
        if (k === 'q' || k === '1') addWin('A'); 
        else if (k === 'e' || k === '2') addWin('B'); 
    });

    function openHelp() { document.getElementById('helpModal').style.display = 'flex'; }
    function closeHelp() { document.getElementById('helpModal').style.display = 'none'; }
    function setInitial(t) { state.isStarted = true; state.initial = t; state.currentSetAttacker = t; state.reverseTurn = (t === 'A') ? 'B' : 'A'; document.getElementById('lockLayer').style.display = 'none'; document.getElementById('initA').className = t === 'A' ? 'btn-init active-a' : 'btn-init'; document.getElementById('initB').className = t === 'B' ? 'btn-init active-b' : 'btn-init'; render(); }
    function addWin(t) { if(!state.isStarted) return; let p = state.smallA + state.smallB, f = (p % 2 !== 0); let sA = (state.currentSetAttacker === 'A') ? (f ? 'ìˆ˜ë¹„' : 'ê³µê²©') : (f ? 'ê³µê²©' : 'ìˆ˜ë¹„'); state.roundLogs.push({ winner: t, sideA: sA, sideB: (sA === 'ê³µê²©' ? 'ìˆ˜ë¹„' : 'ê³µê²©') }); if(t === 'A') state.smallA++; else state.smallB++; if(state.smallA === 3 || state.smallB === 3) { state.largeHistory.push({ num: state.largeA + state.largeB + 1, resA: state.smallA, resB: state.smallB, winner: t }); if(t === 'A') state.largeA++; else state.largeB++; state.currentSetAttacker = state.reverseTurn; state.reverseTurn = (state.reverseTurn === 'A') ? 'B' : 'A'; state.smallA = 0; state.smallB = 0; state.roundLogs = []; } render(); }
    function render() {
        if(!state.isStarted) return;
        document.getElementById('lScoreA').innerText = state.largeA; document.getElementById('lScoreB').innerText = state.largeB;
        document.getElementById('sScoreA').innerText = state.smallA; document.getElementById('sScoreB').innerText = state.smallB;
        let p = state.smallA + state.smallB, f = (p % 2 !== 0);
        let sA = (state.currentSetAttacker === 'A') ? (f ? 'ìˆ˜ë¹„' : 'ê³µê²©') : (f ? 'ê³µê²©' : 'ìˆ˜ë¹„');
        document.getElementById('badgeA').innerText = sA; document.getElementById('badgeA').className = sA === 'ê³µê²©' ? 'pos-badge bg-atk' : 'pos-badge bg-def';
        document.getElementById('badgeB').innerText = (sA === 'ê³µê²©' ? 'ìˆ˜ë¹„' : 'ê³µê²©'); document.getElementById('badgeB').className = sA === 'ìˆ˜ë¹„' ? 'pos-badge bg-atk' : 'pos-badge bg-def';
        const r = document.getElementById('revTeam'); r.innerText = state.reverseTurn === 'A' ? 'ìš°ë¦¬íŒ€' : 'ìƒëŒ€íŒ€';
        r.style.color = state.reverseTurn === 'A' ? 'var(--primary)' : 'var(--danger)';
        document.getElementById('chatDisplay').innerText = `${state.largeA}${state.largeB} ${state.smallA}${state.smallB}`;
        const m = Math.abs(state.largeA - state.largeB) * document.getElementById('mems').value * (document.getElementById('betAmount').value * 10000000);
        document.getElementById('moneyDisplay').innerText = m.toLocaleString() + "ì›"; document.getElementById('moneyDisplay').dataset.raw = m;
        const sb = document.getElementById('smallHistoryBody'); sb.innerHTML = '';
        for(let i=0; i<5; i++) {
            const l = state.roundLogs[i];
            sb.innerHTML += `<tr><td>ë¼ìš´ë“œ ${i+1}</td><td class="${l&&l.winner==='A'?'hist-winner-a':''}">${l&&l.winner==='A'?'['+l.sideA+'] ë“ì ':'-'}</td><td class="${l&&l.winner==='B'?'hist-winner-b':''}">${l&&l.winner==='B'?'['+l.sideB+'] ë“ì ':'-'}</td></tr>`;
        }
        const lb = document.getElementById('largeHistoryBody'); lb.innerHTML = '';
        if(state.largeHistory.length === 0) lb.innerHTML = '<tr><td colspan="3" style="color:#ced4da; padding:15px;">ë°ì´í„° ì—†ìŒ</td></tr>';
        else state.largeHistory.slice().reverse().forEach(h => {
            lb.innerHTML += `<tr><td>ìŠ¤ì½”ì–´ ${h.num}</td><td class="${h.winner==='A'?'hist-winner-a':''}">${h.resA}ìŠ¹ ${h.winner==='A' ? 'ğŸ†' : ''}</td><td class="${h.winner==='B'?'hist-winner-b':''}">${h.resB}ìŠ¹ ${h.winner==='B' ? 'ğŸ†' : ''}</td></tr>`;
        });
    }
    function toggleLargeHistory() { const a = document.getElementById('largeHistoryArea'), b = document.getElementById('moreBtn'); const s = a.style.display === 'block'; a.style.display = s ? 'none' : 'block'; b.innerText = s ? 'í°ìŠ¤ ê²°ê³¼ ë”ë³´ê¸° (â–¼)' : 'íˆìŠ¤í† ë¦¬ ì ‘ê¸° (â–²)'; }
    function copyScore() { const t = document.getElementById('chatDisplay').innerText; navigator.clipboard.writeText(t).then(() => { const a = document.querySelector('.copy-area'); a.style.background = '#40c057'; setTimeout(() => a.style.background = '#343a40', 300); }); }
    function copyRawMoney() { const r = document.getElementById('moneyDisplay').dataset.raw || "0"; navigator.clipboard.writeText(r).then(() => alert("ìˆ«ìë§Œ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤: " + r)); }
    function resetAll() { if(!confirm("ëª¨ë“  ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return; state = { isStarted: false, initial: 'A', currentSetAttacker: 'A', largeA: 0, largeB: 0, smallA: 0, smallB: 0, roundLogs: [], largeHistory: [], reverseTurn: 'B' }; document.getElementById('lockLayer').style.display = 'flex'; document.getElementById('largeHistoryArea').style.display = 'none'; document.getElementById('moreBtn').innerText = 'í°ìŠ¤ ê²°ê³¼ ë”ë³´ê¸° (â–¼)'; document.getElementById('initA').className = 'btn-init'; document.getElementById('initB').className = 'btn-init'; render(); }
</script>
</body>
</html>
